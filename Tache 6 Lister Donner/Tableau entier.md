## üßæ Tableau complet ‚Äî Donn√©es d‚Äôun OR D√©finitif

LE Tableau recense **l‚Äôensemble des champs n√©cessaires √† la cr√©ation et au suivi d‚Äôun Ordre de R√©exp√©dition (OR) d√©finitif** dans le syst√®me SIOR, avec leurs **types, contraintes, sources et commentaires techniques**.

---

| Champ                    | Description fonctionnelle                                            | Type                         | Contraintes / Validation                       | Source technique / Entit√©                    | Commentaires                                                |
| ------------------------ | -------------------------------------------------------------------- | ---------------------------- | ---------------------------------------------- | -------------------------------------------- | ----------------------------------------------------------- |
| **id**                   | Identifiant unique de la demande OR                                  | `Long`                       | G√©n√©r√© automatiquement, cl√© primaire           | `DemandeOr` (colonne `id`)                   | G√©r√© par la base de donn√©es (auto-incr√©ment)                |
| **typeOr**               | Type d‚Äôordre de r√©exp√©dition (DEFINITIF / TEMPORAIRE)                | `String`                     | Obligatoire, Enum                              | `OrDematDTO`, `DemandeOr.data`               | D√©fini par le front (formulaire OR)                         |
| **dateDebut**            | Date de d√©but de validit√© de la r√©exp√©dition                         | `Instant`                    | Obligatoire, format ISO-8601                   | `DemandeOr`                                  | Doit √™tre ant√©rieure √† `dateFin`                            |
| **dateFin**              | Date de fin de validit√© de la r√©exp√©dition                           | `Instant`                    | Obligatoire, format ISO-8601                   | `DemandeOr`                                  | Doit √™tre post√©rieure √† `dateDebut`                         |
| **adresseOrigine**       | Adresse de d√©part du courrier                                        | `String`                     | Obligatoire                                    | `OrDematDTO`, `DemandeOr.data`               | Renseign√©e par le client                                    |
| **adresseDestination**   | Adresse de destination du courrier                                   | `String`                     | Obligatoire                                    | `OrDematDTO`, `DemandeOr.data`               | Doit √™tre diff√©rente de `adresseOrigine`                    |
| **titulaireNom**         | Nom du titulaire de la r√©exp√©dition                                  | `String`                     | Obligatoire                                    | `OrDematDTO`                                 | Saisi sur le front                                          |
| **titulaireIdentifiant** | Identifiant client du titulaire                                      | `String`                     | Obligatoire, cl√© √©trang√®re vers table `client` | `OrDematDTO` / table `client`                | Permet la liaison avec le client r√©f√©renc√©                  |
| **agenceGestionnaire**   | Code de l‚Äôagence en charge de la gestion                             | `String`                     | Obligatoire                                    | `OrDematDTO`, `DemandeOr.data`               | Exemples : ‚ÄúNOU-MAG1‚Äù, ‚ÄúDUM-AG2‚Äù                            |
| **statut**               | Statut du traitement de la demande (EN_COURS, VALIDE, CLOTURE, etc.) | `Enum`                       | Obligatoire                                    | `DemandeOr.data`                             | Mis √† jour par le back lors du traitement                   |
| **motifCloture**         | Motif de cl√¥ture / r√©siliation                                       | `String`                     | Optionnel                                      | `DemandeOr.data`                             | Pr√©sent uniquement en cas de r√©siliation                    |
| **agentValidation**      | Identifiant de l‚Äôagent ayant valid√© la demande                       | `String`                     | Optionnel                                      | `DemandeOr.data`                             | Utilis√© en back-office                                      |
| **commentaire**          | Commentaire libre ajout√© par l‚Äôagent ou le client                    | `String`                     | Optionnel                                      | `DemandeOr.data`                             | Information compl√©mentaire                                  |
| **data**                 | Contenu brut complet de la demande au format JSON                    | `String` (stock√© en `jsonb`) | Non nul                                        | `DemandeOr` (colonne `data`)                 | Contient la version compl√®te du payload envoy√© par le front |
| **createdDate**          | Date de cr√©ation automatique de la demande                           | `Instant`                    | Non nul                                        | `AbstractAuditingEntity`                     | G√©r√©e automatiquement par JPA                               |
| **lastModifiedDate**     | Date de derni√®re modification automatique                            | `Instant`                    | Non nul                                        | `AbstractAuditingEntity`                     | Mise √† jour √† chaque modification                           |
| **endpoint**             | Endpoint REST utilis√© pour la cr√©ation                               | `String`                     | Fixe                                           | `/api/or-definitif` (dans `OrDematResource`) | Point d‚Äôentr√©e pour la cr√©ation OR d√©finitif                |
| **serviceMetier**        | Service ex√©cutant la logique de traitement                           | `String`                     | -                                              | `OrDematService`                             | V√©rifie et enregistre les donn√©es                           |
| **repository**           | Couche de persistance utilis√©e                                       | `String`                     | -                                              | `DemandeOrRepository`                        | Gestion CRUD sur la table `demande_or`                      |
| **entitePrincipale**     | Entit√© persist√©e dans la base de donn√©es                             | `String`                     | -                                              | `DemandeOr.java`                             | Correspond √† la table `demande_or`                          |
| **dtoEntree**            | Donn√©es re√ßues depuis le front                                       | `String`                     | -                                              | `OrDematDTO.java`                            | Contient les champs saisis par l‚Äôutilisateur                |
| **dtoSortie**            | Donn√©es renvoy√©es apr√®s traitement                                   | `String`                     | -                                              | `OrDematResponseDTO.java`                    | Contient les informations enregistr√©es                      |
| **regle_1**              | Validation : `dateFin` > `dateDebut`                                 | -                            | Obligatoire                                    | `OrDematService`                             | V√©rifi√©e c√¥t√© back avant persistance                        |
| **regle_2**              | Validation : `adresseOrigine` ‚â† `adresseDestination`                 | -                            | Obligatoire                                    | `OrDematService`                             | Emp√™che les doublons d‚Äôadresse                              |
| **regle_3**              | Validation : JSON valide dans `data`                                 | -                            | Obligatoire                                    | `DemandeOr`                                  | V√©rifi√© par Jackson lors de la s√©rialisation                |

---
