# TÃ¢che Front-End â€“ CrÃ©ation de la page Angular â€œDemande ORâ€

## ğŸ¯ Objectif gÃ©nÃ©ral

Cette tÃ¢che vise Ã  **comprendre et implÃ©menter** le fonctionnement complet dâ€™une nouvelle page Angular, intitulÃ©e **â€œDemande ORâ€**, dans le cadre du projet **SIOR**.
Elle a pour but de :

* crÃ©er un **composant Angular** (une page indÃ©pendante),
* le relier au **systÃ¨me de routage** (navigation entre pages),
* et lâ€™intÃ©grer dans la **barre de navigation principale** du site (navbar).

MÃªme si le contenu de la page est encore vide (simple titre), cette Ã©tape valide la bonne **intÃ©gration technique du front-end** et prÃ©pare la suite (formulaire dâ€™OR dÃ©finitif).

---

## ğŸ§  ComprÃ©hension du contexte

Dans un projet Angular :

* Une **page** correspond Ã  un **composant** (`Component`) â†’ câ€™est un ensemble de fichiers (HTML, TS, SCSS).
* Une **route** (`Route`) relie une **URL** Ã  un **composant**.
* La **navbar** agit comme un **menu de navigation** permettant Ã  lâ€™utilisateur dâ€™aller dâ€™une page Ã  lâ€™autre sans recharger toute lâ€™application.

Lâ€™ensemble fonctionne grÃ¢ce au **Router dâ€™Angular**, qui gÃ¨re la navigation cÃ´tÃ© client (single-page application).

---

## ğŸ› ï¸ Ã‰tapes de rÃ©alisation et explication dÃ©taillÃ©e

### 1ï¸âƒ£ CrÃ©ation du composant Angular

Commande exÃ©cutÃ©e :

```bash
ng generate component demande-or
```

ğŸ‘‰ Cette commande crÃ©e automatiquement les fichiers suivants :

```
demande-or/
 â”œâ”€â”€ demande-or.component.ts        â†’ logique du composant
 â”œâ”€â”€ demande-or.component.html      â†’ structure HTML (vue)
 â”œâ”€â”€ demande-or.component.scss      â†’ style spÃ©cifique Ã  ce composant
 â””â”€â”€ demande-or.component.spec.ts   â†’ test unitaire du composant
```

### Explication :

* Le **`.ts`** contient la classe du composant et son annotation `@Component`.
* Le **`.html`** dÃ©finit la vue qui sera affichÃ©e dans le navigateur.
* Le **`.scss`** gÃ¨re le style local Ã  ce composant.
* Le **`.spec.ts`** est le fichier de test Angular gÃ©nÃ©rÃ© par dÃ©faut.

Exemple minimal de code HTML :

```html
<h1 style="text-align:center;">Demande OR</h1>
```

Cela permet de **vÃ©rifier visuellement** que la page sâ€™affiche bien sans erreur avant dâ€™ajouter du contenu plus complexe.

---

### 2ï¸âƒ£ Configuration du routing Angular

Le **routing** est la clÃ© du fonctionnement dâ€™une SPA (Single Page Application).
Il permet de charger dynamiquement le bon composant selon lâ€™URL, **sans recharger la page complÃ¨te**.

Modification dans `SiorAppRoutingModule` :

```typescript
import { DemandeOrComponent } from './demande-or/demande-or.component';

RouterModule.forRoot(
  [
    {
      path: 'demande-or',
      component: DemandeOrComponent,
    },
    // autres routes existantes...
  ],
  { enableTracing: DEBUG_INFO_ENABLED }
)
```

### Explication :

* `path: 'demande-or'` : correspond au segment de lâ€™URL (`/demande-or`).
* `component: DemandeOrComponent` : indique quelle page charger.
* `{ enableTracing: DEBUG_INFO_ENABLED }` : active un suivi dans la console pour dÃ©boguer les routes.

RÃ©sultat attendu :
ğŸ‘‰ Naviguer vers `http://localhost:9000/demande-or` affiche directement la page â€œDemande ORâ€.

---

### 3ï¸âƒ£ IntÃ©gration dans la barre de navigation (Navbar)

Ajout du lien dans `navbar.component.html` :

```html
<li class="nav-item" routerLinkActive="active">
  <a class="nav-link" routerLink="/demande-or">
    <fa-icon icon="envelope"></fa-icon>
    <span>Demande OR</span>
  </a>
</li>
```

### Explication :

* `<a routerLink="/demande-or">` : indique Ã  Angular dâ€™utiliser **le routeur interne** (et non une redirection serveur).
* `routerLinkActive="active"` : applique la classe CSS `active` au lien quand on est sur la page.
* Lâ€™icÃ´ne `<fa-icon>` provient de **FontAwesome** (dÃ©jÃ  intÃ©grÃ© via JHipster).
* La condition `*ngIf="isAuthenticated()"` empÃªche lâ€™affichage du lien si lâ€™utilisateur nâ€™est pas connectÃ© (sÃ©curitÃ© front).

---

### 4ï¸âƒ£ VÃ©rification et exÃ©cution du front-end

#### DÃ©marrage en local :

```bash
npm start          # Lance Angular en mode dÃ©veloppement (port 9000)
./gradlew bootRun  # Lance le backend Spring Boot (port 8080)
```

**Fonctionnement des ports :**

| Serveur               | Port        | RÃ´le                              |
| --------------------- | ----------- | --------------------------------- |
| Angular (front)       | 4200 / 9000 | Interface utilisateur             |
| Spring Boot (backend) | 8080        | API REST (traitements et donnÃ©es) |

Angular utilise un **proxy** vers `localhost:8080` pour communiquer avec le backend.

#### VÃ©rifications effectuÃ©es :

* [x] Le lien â€œDemande ORâ€ apparaÃ®t dans la barre de navigation.
* [x] Le clic affiche la page `Demande OR` sans rechargement de lâ€™application.
* [x] Le serveur front (`npm start`) et back (`bootRun`) dÃ©marrent sans erreur.
* [x] Le build `npm run webapp:build` compile correctement le projet.

---

## âœ… RÃ©sultat obtenu

* La page **â€œDemande ORâ€** est maintenant intÃ©grÃ©e dans le front Angular.
* La **navigation entre pages** via la navbar fonctionne.
* Lâ€™environnement Angular â†” Spring Boot est configurÃ© et opÃ©rationnel.
* Cette base servira Ã  intÃ©grer le **formulaire complet dâ€™OR dÃ©finitif** dans les prochaines Ã©tapes.

---

## ğŸ§© Structure finale du code

```
src/
â””â”€â”€ main/
    â””â”€â”€ webapp/
        â”œâ”€â”€ app/
        â”‚   â”œâ”€â”€ demande-or/
        â”‚   â”‚   â”œâ”€â”€ demande-or.component.html
        â”‚   â”‚   â”œâ”€â”€ demande-or.component.scss
        â”‚   â”‚   â”œâ”€â”€ demande-or.component.ts
        â”‚   â”‚   â””â”€â”€ demande-or.component.spec.ts
        â”‚   â””â”€â”€ app-routing.module.ts     â† route ajoutÃ©e ici
        â””â”€â”€ layouts/
            â””â”€â”€ navbar/
                â””â”€â”€ navbar.component.html â† lien ajoutÃ© ici
```

---

## ğŸ§  SynthÃ¨se pÃ©dagogique â€“ Comment Ã§a marche

| Ã‰lÃ©ment               | Fonction dans Angular                                | Ã‰quivalent cÃ´tÃ© backend                         |
| --------------------- | ---------------------------------------------------- | ----------------------------------------------- |
| **Component**         | ReprÃ©sente une â€œpageâ€ ou un bloc visuel              | Un `Controller` qui renvoie une vue             |
| **Routing**           | DÃ©finit les URL disponibles dans lâ€™app               | Les routes Spring `@GetMapping`                 |
| **Navbar**            | Menu pour naviguer entre les composants              | Les liens ou menus Thymeleaf dans un projet MVC |
| **Service** (Ã  venir) | Gestion de la logique mÃ©tier cÃ´tÃ© front (appels API) | `Service` Spring Boot                           |
| **npm start**         | Lance Angular et BrowserSync                         | `./gradlew bootRun` pour le back                |
| **Hot Reload**        | Recharge automatique les changements                 | Auto-reload de Spring DevTools                  |

---

## ğŸ“˜ Points clÃ©s Ã  retenir

* Angular est une **SPA (Single Page Application)** : une seule page HTML est chargÃ©e, le reste est rendu dynamiquement.
* Les **routes Angular** remplacent les redirections classiques cÃ´tÃ© serveur.
* Les **composants** sont la base de la structure : un composant = une section de lâ€™interface.
* La **navbar** centralise la navigation entre composants.
* JHipster configure dÃ©jÃ  la liaison entre Angular (port 9000) et Spring Boot (port 8080).
* Le **cycle de dÃ©veloppement** complet se teste avec `npm start` (front) et `bootRun` (back).

---

## ğŸ“… Notes techniques et prochaines Ã©tapes

* **Version Angular :** 15 (via JHipster)
* **Backend :** Spring Boot 3 â€“ Java 17
* **Authentification :** Obligatoire pour afficher la navbar et accÃ©der Ã  la page.
* **Proxy configurÃ© :** `/api/**` â†’ `localhost:8080`

### Prochaines Ã©tapes :

* Ajouter le **formulaire de crÃ©ation dâ€™Ordre de RÃ©expÃ©dition dÃ©finitif**.
* IntÃ©grer la logique du **service Angular** pour appeler les endpoints `/api/or-definitif` et `/api/or-demat`.
* CrÃ©er les **DTO Angular** correspondants (`OrDematDTO`, `OrDematResponseDTO`).

---

âœï¸ **Auteur :** A. Nguyen
ğŸ“… **Date :** 06/11/2025
ğŸ”— **Module concernÃ© :** Front-End â€“ SIOR (Gestion des OR dÃ©matÃ©rialisÃ©s)
ğŸ“š **But pÃ©dagogique :** Comprendre comment Angular structure ses pages, routes et composants pour prÃ©parer lâ€™intÃ©gration complÃ¨te du module â€œDemande ORâ€.
